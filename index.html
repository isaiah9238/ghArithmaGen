<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Arithma-Sketch | Field Console</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  </head>
  <body>

    <aside id="sidebar">
      <h1>Arithma-Sketch</h1>
      
      <div class="card">
        <strong>Job Management</strong>
        <div class="row-grid">
            <button id="btn-reset" class="reset-btn" style="background: #444;">New Job</button>
            <button id="btn-recenter" class="reset-btn" style="background: #444;">Find Pen</button>
        </div>
        <div class="row-grid">
            <button id="btn-save" class="action-btn" style="background: #27ae60; margin:0;">SAVE</button>
            <button id="btn-load" class="action-btn" style="background: #8e44ad; margin:0;">LOAD</button>
            <input type="file" id="file-input" accept=".json" style="display: none;">
        </div>
        <div class="row-grid" style="margin-bottom:0;">
            <button id="btn-png" class="action-btn" style="background: #2980b9; margin:0;">IMG Export</button>
            <button id="btn-pdf" class="action-btn" style="background: #c0392b; margin:0;">PDF Export</button>
        </div>
      </div>

      <div class="card">
        <strong>Drafting Styles</strong>
        <div class="input-group">
            <label class="label-text">Color:</label>
            <input type="color" id="input-color" value="#f3e2a0" style="height:30px; cursor:pointer; padding:0; border:none;">
        </div>
        <div class="input-group">
            <label class="label-text">Width:</label>
            <input type="number" id="input-width" value="2" min="1" max="20">
            <span style="font-size:0.7rem; color:#aaa;">px</span>
        </div>
      </div>

      <div class="card">
        <strong>View & Modify Tools</strong>
        
        <div class="row-grid">
            <button id="btn-fit" class="action-btn" style="background:#555; margin:0;">Fit Screen</button>
            <button id="btn-paper-mode" class="action-btn" style="background:#eee; color:#000; margin:0;">Paper Mode</button>
        </div>
        
        <div class="row-grid">
             <button id="btn-zoom-in" class="reset-btn" style="font-weight:bold; font-size:1.2rem;">+</button>
             <button id="btn-zoom-out" class="reset-btn" style="font-weight:bold; font-size:1.2rem;">-</button>
        </div>

        <div class="input-group">
             <label class="label-text">Zoom:</label>
             <input type="number" id="input-scale" value="5" step="1">
        </div>
        
        <hr style="border:0; border-top:1px solid #444; margin:10px 0;">
        
        <div class="row-grid">
            <button id="btn-offset-left" class="reset-btn">Offset Left</button>
            <button id="btn-offset-right" class="reset-btn">Offset Right</button>
        </div>
        
        <div class="input-group">
            <label class="label-text">Dist:</label>
            <input type="number" id="input-offset-dist" value="10">
        </div>
        
        <button id="btn-fillet" class="action-btn" style="background: #e67e22; width:100%; margin-top:5px;">JOIN / FILLET (Last 2)</button>
      </div>

      <div class="card">
        <strong>Target / Pen Control</strong>
        
        <div class="input-group">
            <label class="label-text">East:</label>
            <input type="number" id="input-x" placeholder="0.00" value="0.00">
        </div>
        <div class="input-group">
            <label class="label-text">North:</label>
            <input type="number" id="input-y" placeholder="0.00" value="0.00">
        </div>
        
        <div class="row-grid">
            <button id="btn-go" class="action-btn" style="margin:0;">DRAW TO</button>
            <button id="btn-jump" class="action-btn" style="background: #555; margin:0;">JUMP TO</button>
        </div>
        
        <div style="margin-top:8px; font-size:0.7rem; color:#666; text-align:center; border-top:1px solid #333; padding-top:5px;">
            Distance from Origin: <span id="offset-display" style="color:#f3e2a0">0.00'</span>
        </div>
      </div>
      
      <div class="card">
        <strong>Traverse Line</strong>
        
        <div class="input-group">
            <label class="label-text" style="width:60px;">Azimuth:</label>
            <input type="number" id="input-az" placeholder="0-360" value="0">
        </div>
        <div class="input-group">
            <label class="label-text" style="width:60px;">Dist:</label>
            <input type="number" id="input-dist" placeholder="Feet" value="100">
        </div>

        <div class="row-grid">
             <button id="btn-turn-left" class="reset-btn">Turn Left</button>
             <button id="btn-turn-right" class="reset-btn">Turn Right</button>
        </div>
        
        <button id="btn-traverse" class="action-btn" style="background: #9b59b6; color: #fff; width:100%;">STAKE LINE</button>
      </div>

      <div class="card">
        <strong>Curve Staker</strong>
        
        <div class="input-group">
            <label class="label-text" style="width:60px;">Radius:</label>
            <input type="number" id="curve-radius" value="15">
        </div>
        
        <div class="input-group">
            <label class="label-text" style="width:60px;">Facing:</label>
            <select id="curve-facing">
                <option value="Tangent">Tangent (Auto)</option>
                <option value="N">North</option>
                <option value="S">South</option>
                <option value="E">East</option>
                <option value="W">West</option>
            </select>
        </div>
        
        <div class="input-group">
            <label class="label-text" style="width:60px;">Turn:</label>
            <select id="curve-turn">
                <option value="Left">Left</option>
                <option value="Right">Right</option>
            </select>
        </div>
        
        <button id="btn-curve" class="action-btn" style="background: #33d9b2; color: #000; width:100%;">STAKE CURVE</button>
      </div>

      <div class="card">
        <strong>Area & Parcels</strong>
        <div style="display:flex; gap:5px; margin-top:5px;">
            <button id="btn-toggle-fill" class="reset-btn" style="background:#444; font-size:0.7rem;">Fill: ON</button>
            <button id="btn-add-parcel" class="action-btn" style="background: #27ae60; color: white; margin:0; font-size:0.7rem;">+ SAVE PARCEL</button>
        </div>
        <div style="border-top:1px solid #444; margin-top:5px; padding-top:5px;">
            <div class="data-row">
                <span style="color:#aaa; font-size:0.8rem;">Current:</span>
                <span id="area-display" style="color:#f3e2a0; font-weight:bold;">0.00 Ac</span>
            </div>
        </div>
        <div style="max-height: 100px; overflow-y: auto; margin-top:5px; border:1px solid #333; background:#111;">
            <table style="width:100%; font-size:0.75rem; border-collapse:collapse;">
                <tbody id="parcel-list-body"></tbody>
            </table>
        </div>
      </div>

      <div class="card">
        <strong>Tools</strong>
        
        <div style="display: flex; flex-direction: column; gap: 5px; margin-top: 5px;">
            <label style="display:flex; align-items:center; gap:8px; font-size:0.8rem; cursor:pointer;">
                <input type="checkbox" id="snap-end" checked> Endpoint
            </label>
            <label style="display:flex; align-items:center; gap:8px; font-size:0.8rem; cursor:pointer;">
                <input type="checkbox" id="snap-mid" checked> Midpoint
            </label>
            <label style="display:flex; align-items:center; gap:8px; font-size:0.8rem; cursor:pointer;">
                <input type="checkbox" id="snap-center"> Center (Arc)
            </label>
            
            <hr style="width:100%; border:0; border-top:1px solid #444; margin:5px 0;">
            
            <button id="btn-measure" class="reset-btn" style="background:#333; border:1px solid #666; color:#aaa;">RULER: OFF</button>
            <div id="measure-output" style="font-size:0.75rem; color:#f3e2a0; min-height:1.2em;"></div>
            
            <hr style="width:100%; border:0; border-top:1px solid #444; margin:5px 0;">

            <div style="display: flex; gap: 5px;">
                <button id="btn-undo" class="reset-btn" style="background: #555; border: 1px solid #666;">Undo</button>
                <button id="btn-close" class="reset-btn" style="background: #d99e33; color:black; border: none; font-weight:bold;">Close Loop</button>
            </div>
        </div>
      </div>
      
    </aside>

    <main id="canvas-container">
        <canvas id="sketchCanvas"></canvas>
    </main>

    <script src="script.js"></script>
  </body>
</html>
